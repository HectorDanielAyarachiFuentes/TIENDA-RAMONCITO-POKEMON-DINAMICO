<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gengar - Comercio Digital de Pokémon</title>
    <link rel="stylesheet" href="style.css">
    <link type="image/png" sizes="120x120" rel="icon" href="https://github.com/HectorDanielAyarachiFuentes/TIENDA-RAMONCITO-POKEMONS/blob/main/Fotos/umbrella-corporation-120.png?raw=true">
</head>
<body>
    <header class="header">
        <h1>CATALOGO POKÉMON</h1>
        <p>Solo disponibles los mejores Pokémon:</p>
    </header>
    <nav class="navbar">
        <button type="button" class="navbar-toggle" id="navbarToggle" aria-label="Toggle navigation menu">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </button>
        <span id="ramoncito">TIENDA RAMONCITO</span>
        <ul class="navbar-menu" id="navbarMenu">
            <li><a href="index.html">INICIO</a></li>
            <li><a href="index-picachu.html">CATÁLOGO</a></li>
            <li><a href="https://hectordanielayarachifuentes.github.io/venta-tarjetas-pokemon/">TARJETAS POKEMON</a></li>
        </ul>
        <button type="button" id="modoBoton">Modo claro</button> <!-- Botón de cambio de modo -->
    </nav>
    <main class="content">
        <div id="detalle-container">
            <!-- El contenido del Pokémon se cargará aquí dinámicamente -->
            <div class="loader-wrapper">
                <div class="loader"></div>
                <p>Cargando detalles...</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>© 2023 Comercio Digital de Pokémon</p>
        <p>¡Atrápalos ya, o al menos clónalos!</p>
    </footer>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('detalle-container');
            const urlParams = new URLSearchParams(window.location.search);
            const pokemonId = urlParams.get('id');

            if (!pokemonId) {
                container.innerHTML = '<p class="error-message">No se ha especificado un Pokémon.</p>';
                return;
            }

            fetch('datos.json')
                .then(response => response.json())
                .then(data => {
                    const pokemon = data.find(p => p.nombre.toLowerCase() === pokemonId.toLowerCase());

                    if (!pokemon) {
                        container.innerHTML = '<p class="error-message">Pokémon no encontrado.</p>';
                        return;
                    }

                    // Crear HTML dinámicamente
                    const debilidadesHTML = pokemon.debilidades.map(d => `<span class="debilidad-tag">${d}</span>`).join('');

                    container.innerHTML = `
                        <div class="detalle-imagen-col">
                            <img src="${pokemon.imagen}" alt="Imagen de ${pokemon.nombre}">
                        </div>
                        <div class="detalle-info-col">
                            <span class="pokemon-type">${pokemon.caracteristicas.tipo}</span>
                            <h2 class="nombre-pokemon">${pokemon.nombre}</h2>
                            <p class="lema-pokemon">"${pokemon.lema}"</p>
                            <p class="descripcion-pokemon">${pokemon.descripcion}</p>
                            
                            <h3>Estadísticas</h3>
                            <div class="stats-grid">
                                <div><strong>Altura</strong><span>${pokemon.fisico.altura}</span></div>
                                <div><strong>Peso</strong><span>${pokemon.fisico.peso}</span></div>
                                <div><strong>Poder</strong><span>${pokemon.caracteristicas.poder}</span></div>
                                <div><strong>Velocidad</strong><span>${pokemon.caracteristicas.velocidad}</span></div>
                            </div>

                            <h3>Debilidades</h3>
                            <div class="debilidades-list">${debilidadesHTML}</div>

                            <div class="compra-section">
                                <p class="precio">Precio: <span>US$ ${pokemon.precio.toLocaleString('es-ES')}</span></p>
                                <button class="compra-button">Adquirir Espécimen</button>
                            </div>
                            
                            <button class="volver-button">Volver al Catálogo</button>
                        </div>
                    `;

                    // Añadir Event Listeners
                    container.querySelector('.volver-button').addEventListener('click', () => {
                        window.location.href = 'index-picachu.html';
                    });
                    container.querySelector('.compra-button').addEventListener('click', () => {
                        alert(`¡Felicidades! Has iniciado el proceso de adquisición de ${pokemon.nombre}. Un agente de Umbrella Corporation se pondrá en contacto contigo en breve.`);
                        window.location.href = 'index-picachu.html';
                    });
                })
                .catch(error => {
                    console.error('Error al cargar los datos del Pokémon:', error);
                    container.innerHTML = '<p class="error-message">Hubo un problema al cargar la información. Inténtalo de nuevo.</p>';
                });
        });
    </script>
</body>
</html>
